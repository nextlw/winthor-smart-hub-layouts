{
	"tabela": {
		"nome": "PCINTEGRACAOROTASERVICO",
		"campos": [
			{
				"nome": "SOMENTEATUALIZARINTEGRACAOCORE",
				"valor": "N"
			},
			{
				"nome": "ID",
				"valor": "WTA - Buscar tipos cobrancas"
			},
			{
				"nome": "IDEMPRESAAPI",
				"valor": "WINTHOR-WTA"
			},
			{
				"nome": "SERVICO",
				"valor": "WTA - Buscar tipos cobrancas"
			},
			{
				"nome": "LAYOUTCOMUNICACAO",
				"valor": {
					"name": "WTA - Buscar tipos cobran√ßas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{TOKEN}}"
							},
							{
								"key": "Accept",
								"value": "*/*"
							}
						],
						"url": {
							"raw": "{{URL_BASE}}/winthor/venda/v0/tipos-cobrancas",
							"query": [
								{
									"key": "tamanho",
									"value": "{{PAGE_SIZE}}"
								},
								{
									"key": "pagina",
									"value": "{{PAGE}}"
								},
								{
									"key": "dataUltimaAlteracao",
									"value": "{{LAST_CHANGE}}"
								}
							]
						}
					},
					"response": []
				}
			},
			{
				"nome": "LAYOUTTRANSFORMACAO",
				"valor": [
					{
						"operation": "default",
						"spec": {
							"items[]": {
								"*": {
									"codOperadoraCartao": "cartao_null"
								}
							}
						}
					},
					{
						"operation": "modify-overwrite-beta",
						"spec": {
							"items": {
								"*": {
									"idExterno": "=concat('pdvsync-cobranca-', @(1,id),'-',@(1,dataAtualizacao))",
									"id": "=toUpper",
									"id_verifica_troco": "@(1,id)",
									"codigoSistemaExterno": "@(1,id)",
									"descricao": "=concat(@(1,id),' - ',@(1,cobranca))",
									"valorMinimoPedido_str": "=toString(@(1,valorMinimoPedido))",
									"valorMinimoPedido_arr": "=split('\\.',@(1,valorMinimoPedido_str))",
									"valorMinimoPedido": "=join(',',@(1,valorMinimoPedido_arr))"
								}
							}
						}
					},
					{
						"operation": "shift",
						"spec": {
							"items": {
								"*": {
									"idExterno": "idExterno[]",
									"id": "items.[&1].idRetaguarda",
									"codFilial": {
										"99": {
											"#{{MASTER_ID_PROPRIETARIO}}": "items.[&3].idProprietario"
										},
										"*": {
											"@1": "items.[&3].idProprietario"
										}
									},
									"cobranca": "items.[&1].descricaofiscal",
									"descricao": "items.[&1].descricao",
									"nivelvenda": {
										"0": {
											"#0": "items.[&3].situacao"
										},
										"*": {
											"#1": "items.[&3].situacao"
										}
									},
									"id_verifica_troco": {
										"D": {
											"#1": "items.[&3].permiteTroco",
											"#TR": "items.[&3].idRetaguardaFormaPagTroco"
										},
										"DH": {
											"#1": "items.[&3].permiteTroco",
											"#TR": "items.[&3].idRetaguardaFormaPagTroco"
										},
										"CH*": {
											"#1": "items.[&3].permiteTroco",
											"#TR": "items.[&3].idRetaguardaFormaPagTroco"
										}
									},
									"valorMinimoPedido": "items.[&1].valorMinimoAceito",
									"codigoSistemaExterno": "items.[&1].codigoSistemaExterno",
									"codOperadoraCartao": {
										"cartao_null": {
											"@(2,id)": {
												"D": {
													"#1": "items.[&5].tipo"
												},
												"DH": {
													"#1": "items.[&5].tipo"
												},
												"TR": {
													"#0": "items.[&5].tipo"
												},
												"CH": {
													"#4": "items.[&5].tipo"
												},
												"CH*": {
													"#4": "items.[&5].tipo"
												},
												"PIX": {
													"#8": "items.[&5].tipo"
												},
												"PIX*": {
													"#8": "items.[&5].tipo"
												},
												"*": {
													"#0": "items.[&5].tipo"
												}
											}
										}
									},
									"operadoras": {
										"*": {
											"codcob": [
												"items.[&3].formasPagtoOperadoras[&1].idRetaguarda",
												"items.[&3].formasPagtoOperadoras[&1].idRetaguardaFormaPagto",
												"items.[&3].formasPagtoOperadoras[&1].idRetaguardaOperadoraPagto"
											],
											"#1": "items.[&3].formasPagtoOperadoras[&1].situacao",
											"tipoOperacaoTef": {
												"codTipoTef": {
													"01": {
														"#3": "items.[&6].tipo"
													},
													"02": {
														"#2": "items.[&6].tipo"
													},
													"*": {
														"#0": "items.[&6].tipo"
													}
												}
											}
										}
									}
								}
							}
						}
					},
					{
						"operation": "default",
						"spec": {
							"_attr_access": "items",
							"items[]": {
								"*": {
									"idInquilino": "{{ID_INQUILINO}}",
									"loteOrigem": "{{LOTE_ORIGEM}}",
									"idProprietario": "{{MASTER_ID_PROPRIETARIO}}",
									"situacao": 0,
									"permiteTroco": 0,
									"valorMinimoAceito": 0
								}
							}
						}
					}
				]
			},
			{
				"nome": "ATIVO",
				"valor": "S"
			},
			{
				"nome": "AUTENTICADOR",
				"valor": "N"
			},
			{
				"nome": "DATASINCRONISMO",
				"valor": "14-NOV-23"
			},
			{
				"nome": "REFRESHTOKEN",
				"valor": ""
			}
		]
	}
}